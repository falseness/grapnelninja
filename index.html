<!Doctype html>
<html>
    <head>
        <title>grapnel ninja</title>
        <meta charset = "UTF-8">
        <style>
            body 
            {
                margin: 0;
                padding: 0;
                overflow: hidden;
                background-color: 0;
            }
        </style>
    </head>
    <body>
        <canvas id = "canvas"></canvas>
        <script src = "gameoptions.js"></script>
        
        <script src = "collision/circlewithcircle.js"></script>
        <script src = "collision/linewithline.js"></script>
        <script src = "collision/circlewithline.js"></script>
        
        <script src = "elements/factory.js"></script>
        <script src = "sprites/floor.js"></script>
        
        <script src = "sprites/empty.js"></script>
        <script src = "sprites/element.js"></script>
        
        <script src = "sprites/ninja.js"></script>
        <script src = "sprites/grapnel.js"></script>
        
        <script src = "sprites/rect.js"></script>
        <script src = "sprites/jumpingcube.js"></script>
        
        <script src = "sprites/create.js"></script>

        <script src = "sprites/triangle.js"></script>
        <script src = "sprites/trampoline.js"></script>
        <script src = "sprites/side.js"></script>
        
        <script src = "physics.js"></script>
        
        <script src = "moveScreen.js"></script>
        
        <script src = "render/draw.js"></script>
        
        <script src = "events.js"></script>
        <script>
            'use strict'
            let canvas = document.getElementById('canvas')
            let ctx = canvas.getContext('2d')
            
            canvas.width = width
            canvas.height = height
            let floors =
            [
                new GroundFloor(1.9 * height, 2.2 * height),
                new Floor(1 * height, 1.9 * height, {min: 0.3 * width, max: 0.3 * width}, 
                [
                    {type: 'horizontalTopRect' , chance: 20      },
                    {type: 'verticalGroundRect', chance: 40 },
                    {type: 'jumpingCube', chance: 40}
                    
                ]),
                new Floor(0, height, {min: 0.3 * width, max: 0.4 * width},
                [
                    {type: 'triangle', chance: 100}
                ])
            ]
            let elementsFactory = new ElementsFactory
            
            window.onload = startGame()
            
            function reStart()
            {
                screen.x = 0
                screen.y = screenY
                grapnel.pos = []
                grapnel.speedX = 0
                grapnel.speedY = 0
                grapnel.throwed = false
                
                ninja.x = 0.2 * width
                ninja.y = ninjaY
                ninja.speedX = 0
                ninja.speedY = 0
                
                scoreText.count = 0
                
                
                
                for (let i = 0; i < floors.length; ++i)
                {
                    floors[i].elements = []

                    floors[i].generatePrimaryElements()
                }
            }
            function startGame()
            {  
                //generatePrimaryElements()
                
                for (let i = 0; i < floors.length; ++i)
                {
                    floors[i].generatePrimaryElements()
                }
                
                createEvents()
                
                requestAnimationFrame(gameLoop)
            }

            function gameLoop()
            {
                physics()
                draw()
                
                requestAnimationFrame(gameLoop)
            }
            
            
            
        </script>
    </body>
</html>